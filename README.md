# evernote-example
Упражнение на чтение кода. Взаимодействие с API Evernote.

# Взаимодействуем с веб-сервисом Evernote через API

Данные скрипты созданы для работы с веб-сервисом Evernote, предназначенным для хранения заметок.

Каждый файл программы, за исключением ```config.py``` работает отдельно и выполняет свою уникальную функцию.


## config.py

Данный файл является файлом-конфигурацией. Он необходим для управления настройками с помощью pydantic. 

Инициализатор определяет значения полей с помощью чтения из файла ```.env```. 

Здесь происходит считывание полей для следующих параметров: 

* ```EVERNOTE_CONSUMER_KEY``` - API-ключ;

* ```EVERNOTE_CONSUMER_SECRET``` - секретная часть API-ключа;

* ```EVERNOTE_PERSONAL_TOKEN``` - ваш личный токен для аутентификации;

* ```JOURNAL_TEMPLATE_NOTE_GUID``` - идентификатор заметки, содержимое которой вы будете копировать
 
* ```JOURNAL_NOTEBOOK_GUID``` - идентификатор заметки, в которую вы будете копировать содержимое 

* ```INBOX_NOTEBOOK_GUID``` - идентфикатор книги заметок

Все переменные должны иметь формат строки. 

## list_notebooks.py


Данный скрипт предназначен для вывода в консоль всех заметок и их идентификатора, которые существуют в вашем профиле. 

Первоначально, происходит загрузка всех переменных окружения в переменную. Затем присваивается ваш личный API-ключ и отключается переменная для тестирования.

После этого происходит подключение к вашему аккаунту, с последующей загрузкой всех заметок в переменную. 

Под конец программа последовательно выведет в консоль индентификатор и название каждой заметки, хранящейся в переменной


## dump_inbox.py

Данный скрипт предназначен для вывода в консоль содержимого заметок, которые хранятся в вашем аккаунте. 

При запуске через консоль, с помощью ключа ```number```, вы можете указать количество заметок, которое вы хотите вывести на экран. При отсутсвии данного ключа, программа выведет по умолчанию 10 заметок. 


### get_notebook_list

Данная функция принимает на вход четыре параметра:

* Список объектов, содержащий заметки
* Идентфикатор книги заметок
* Количество заметок, которое вы хотите вывести в консоль
* Числовой индекс первой заметки для отображения в отсортированных результатах. 

Первоначально просиходит инициализация фильтра с последующем определением списка критериев, которые будут ограничивать возвращаемые заметки. В данном случае это идентфикатор книги заметок. 

Затем происходит определение критериев информации, которые должна быть возвращена для каждой соответствующей заметки.

После этого мы получаем информацию о заметках, соответсвующих установленным нами фильтром, индексом для отображения, количеством заметок для вывода и критериями для вывода. 

Полученный список информации о заметках и будет результатом работы функции.


### main

Сначала выполняется обработка параметра, введенного через консоль. Данный параметр является количеством заметок, которое мы хотим вывести на экран. В случае если параметр не был введен, то программа по умолчанию выведет десять заметок

Затем происходит загрузка всех переменных окружения в переменную. После этого присваивается ваш личный API-ключ и отключается переменная для тестирования.

Результаом будет подключение к вашему аккаунту, с последующей загрузкой всех заметок в переменную. 

Следующим этапом работы функции будет получение списка информации о заметках с помощью функции ```get_notebook_list```

В последней стадии работы функции, последовательно, будет выведено на экран содержимое каждой заметки. Для коррекктного вывода используется html-декодер.


## add_note2journal


Данный скрипт предназначен для копирования заметки. 

При запуске через консоль, с помощью ключа ```date```, вы можете ввести дату, которую вы хотите указать в заголовке. При отсутсвии данного ключа, программа по умолчанию задаст текущую дату.


### is_valid_date

Данная функция принимает на вход строку введенную через командную строку.

Основное предназначение функции - проверка того, что введеная дата была введена корректно.  

В случае успешной провеки результатом работы программы будет дата введенная через командную строку, иначе появится ошибка ```Not a valid date: '{0}'.```


### main

Сначала выполняется обработка параметра, введенного через консоль. Данный параметр является датой, которую вы хотите указать в заголовке. При отсутсвии данного ключа, программа по умолчанию задаст текущую дату.

Во время обработк программа проверит корректность введенной строки с помощью функции ```is_valid_date```

Затем происходит загрузка всех переменных окружения в переменную. После этого присваивается ваш личный API-ключ и отключается переменная для тестирования.

Результаом будет подключение к вашему аккаунту, с последующей загрузкой всех заметок в переменную. 

Следующим этапом работы функции будет преобразование введной строки в стандарт ```iso``` и получение названия дня недели.

В последней стадии работы функции программа выполняет копирование заметки идентифкатора ```JOURNAL_TEMPLATE_NOTE_GUID``` в заметку с идентификатором ```JOURNAL_NOTEBOOK_GUID```. Далее выполняется кодирование заголовка в формат ```utf8```, его форматирование и добавление даты, с последующим обратным декодированием. 

Результатом работы функции будет обновление заметки и вывод оповещения на экран. 


# Как установить

Для корректной работы скриптов вам необходимо зарегестрироваться на сайте [evernote](https://evernote.com) и получить необходимые API-токены

Затем вам необходимо создать в папке проекта файл ```.env``` и добавить в него ваш API_КЛЮЧ для сайта SuperJob следующего формата:

```
EVERNOTE_CONSUMER_KEY=API_КЛЮЧ;
EVERNOTE_CONSUMER_SECRET=СЕКРЕТНЫЙ_API_КЛЮЧ;
EVERNOTE_PERSONAL_TOKEN=ТОКЕН_ДЛЯ_АУТЕНТИФИКАЦИИ;
JOURNAL_TEMPLATE_NOTE_GUID=ИДЕНТИФИКАТОР_КОПИРУЕМОЙ_ЗАМЕТКИ
JOURNAL_NOTEBOOK_GUID=ИДЕНТИФИКАТОР_ОБНОВЛЯЕМОЙ_ЗАМЕТКИ 
INBOX_NOTEBOOK_GUID=ИДЕНТИФИКАТОР_КНИГИ_ЗАМЕТОК


```

Также вам необходимо установить соответствующие внешние пакеты. Версии данных пакетов вы можете найти в файле requirements.txt


# Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).
